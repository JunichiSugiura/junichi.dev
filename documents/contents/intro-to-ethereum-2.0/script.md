## イントロ

今月の初めに無事Etheruem 2.0最初のフェーズであるBeacon chainが走り出したということで、
改めてなぜ2.0が生まれたのかということとその概要をまとめてみたので、皆さんに共有していきたいと思います。

## Ethereumの登場

2015年にラウンチされたEtheruemなんですが、
当時はスマートコントラクト書いて分散型のアプリケーション、通称DappsというものをだれでもWebアプリと同じ感覚で開発できるようになったということで話題になりました。
ビットコインにもscriptingといってある程度お金の流れをプログラムすることが可能なんですが、
ネットワーク攻撃を避けるためにloop,opt codeでいうところのjumpができなくなってます。
EtheruemではGasというプログラムの複雑性に応じて手数料を課す仕組みを導入したことによって、
loopを含めチューリング完全なコードを書けるようになりました。

これによって様々なDappsのブームが生まれました。
最初のブームはICOでたくさんのERC-20トークンが生まれたことです。

そして次のブームはCryptokittiseという一つ一つ個性も価値も違う猫をNFTとしてトレードしたいブリーディングしたりできるDappsが流行りました。

そして近年ではDecentralized Finance、略してDiFiと呼ばれる分野において、既存の金融市場・金融商品の分散化・置き換えを目標に日々研究開発が進められています。

ただこれらのブームによっていくつか問題が生じてきました。

## Ethereum 1.0の問題点

最初に紹介していまうと、主に

- スケーラビリティ
- セキュリティ
- サステイナビリティ

この３つです。

まずはこの中でも一番話題に上がりやすいスケーラビリティから見ていきましょう。

### スケーラビリティ

現状Eth1のトランザクションスピードは毎秒約15txっていわれてます。

一方Bitcoinはどうかと言うと毎秒約7tx。Eth1の約半分ですね。
一見遅く感じるかもしれませんが、もともとの発想が通貨というよりゴールドに起因しているので、
金を輸送、特に海外に送る手間を考えると画期的なスピードと手軽さですよね。

2016年頃にブームとなったICOやCryptokitteisに代表されるDappsの到来、そして近年社会実装が進められているDecentralized Finance(DiFi)といったユースケースの登場により、Eth1のネットワークに大量のトランザクションが流れ込み、結果として手数料の部分的な上昇に繋がりました。
数十円分のETHを送るために数千円分の手数料を支払わなければいけなくなるようなシチュエーションが発生してしまいました。

ちなみに皆さんのカードにもついているVisaは平均して毎秒約1700 tx、ピーク時に4000txを処理しているそうです。
その数字からもマスアダプションを想定したときに現状の毎秒15 txというスピードが如何にボトルネックになってくるかが想像できるかと思います。

ノードのサイズを上げずに１秒あたりに処理できるトランザクションの量を如何に上げるかが課題となってきます。
Eth2ではこれを毎秒1000txにするのが目標として掲げられています。

### セキュリティ

２つ目の問題点はセキュリティです。
Bitcoinの運用を通して安全性が実証されたPoWですが、このアルゴリズムは無敵ではありません。
PoWの弱点としてよく指摘されるものとして51%アタックというものがあります。

これは一部のネットワーク参加者が全体の51%以上の計算力を手にしてしまった場合、過去の台帳を自分の都合のいいように改ざんできてしまう点です。
実際ネットワーク参加者は世界中に分散し、各自が専用にカスタマイズされたコンピューターと大量の電力を消費しているため、
これほどの計算力を一部の人達で確保するのは実質不可能になってます。
ただもし将来誰かが量子コンピューターのような従来の計算力を超越するような圧倒的なイノベーションを起こした場合、
一部の人間が51%以上の力を手にする可能性は０とはいいきれません。

### サステイナビリティ

そしてもう一つの問題点はサステイナビリティです。
現状Eth1で使用されているProof-of-Workという仕組みには膨大な計算能力と電気が必要になります。
これは近年の環境重視のトレンドからかなり外れてますよね。

この３つの問題点を解決するために当初Serenity(静穏)というのちにEthereum2.0と言われる構想が生まれました。
ちなみにこれらの構想はEth1.0がラウンチされる前からすでにロードマップに存在していました。

では一体どんな変更がEth2に加えられたのかということなんですが、
大きく２点ここでは取り上げます。

#### PoW -> PoS 

まず1つ目はProof-of-Stakeです。

現状Eth1ではProof−of−Workというアルゴリズムによってネットワーク参加者間での合意形成を図っています。
これはBitcoinですでに使われている仕組みで、その歴史から安全性が実証されています。
PoWではマイナーと呼ばれる人たちが大量のコンピューターと電力を使用して、数学的にトランザクションの正当性を証明することで安全なネットワークが成り立っています。
入
これに変わってEth2から新たにProof-of-Stakeという仕組みを採用しています。
PoSでは計算処理による証明に変わって経済的なインセンティブとペナルティを通して、ネットワークの安全性を担保します。
これに伴ってマイナーの役割は廃止され、新たにバリデーターという人たちが登場します。

#### Validator

それではバリデーターとは一体どんな人たちなんでしょうか？

まずバリデーターになるためには32ETHをEth1メインネット上にデプロイされているデポジットコントラクトに32ETHを預ける必要があります。
これをstakingといいます。
32ETHというのはレートにもよりますが今だと大体200万円弱ですかね。

これを担保にバリデーターは新規のトランザクションの承認とブロックの生成を行い、報酬として送金手数料やブロックリワードを受け取ります。

ただオフライン状態が続いた場合やプロトコルに反する行動をした場合は、貰えるはずだった報酬分が逆にペナルティーとしてデポジットから引かれてしまいます。
これをslashっていいます。

この報酬というのはネットワークに参加するバリデーターの総数によって変動します。
バリデーターの数が少なくなると、ネットワークの安全性も下がるので、インセンティブとして多めの報酬が与えられます。
ただバリデーターが少なくなるほど一人ひとりの責任も上がるのでペナルティーも同時に増えます。

なんで32ETHというと,
先程問題点として上げた51%アタックを行うにはstakeされたETHの51%以上を保有する必要があります。
今だとだいたい150万ETHがstakingされてるので、これの51%の75万ETH、時価にして約454億円以上に相当するETHを保有している必要があります。
32ETHにすることで、この攻撃を経済的に難しくする効果があります。
また個人から見たときに決して安くはない無理ではない金額に設定することで世界中の誰でもネットワークに参加して、安全性の強化に貢献することができるようになってます。

まとめるとProof-of-Stakeに移行することによって
ものすごい電力を必要とするマイナーがいなくなることでサステイナビリティが解消され、
51%アタックも難しくなることで安全性も上がり、
更にShardingというものが登場することによってスケーラビリティ問題も解消されます。

#### Sharding

Shardingというとデーターベースに強い人などは馴染みのある概念かもしれません。
データベースと同じようにブロックチェーンを64個の小さなチェーンに分けて管理することをいいます。

でこのshardされたチェーンに参加するノードはその一部のデータのみを取り扱えば良いので、
比較的小さな容量のコンピューターでも動かすことができます。
これも分散化に繋がり、より安全なネットワークに貢献します。
また参照する取引履歴も小さくなるので処理速度があがります。

そしてさらにスケーラビリティを向上させるためにRollupsというLayer2の技術が提案されています。

Rollupsは簡単に言うといくつかのトランザクションをオフラインで束ねて、zero-knowledge proofなど証明を付与したもので、後にブロックチェーンに記録します。
そうすることでトランザクション毎にいちいち全ノードが承認を行う必要がなくなるのでスピードがあがります。

これにより毎秒10万txも可能になるのではないかと期待されてます。

##### Beacon chain

最後にshardされたチェーンを束ねる役割となるのがBeacon chainです。
これにはバリデーターをランダムなshard chainにアサインする役割があります。
ランダムにすることによって51%アタックの防止になります。

##### Eth1 Docking

面白いのは最終的には現在Eth1といわれてるチェーンもshardされたチェーンの１つとしてEth2にdockingされます。
これによってEth1上のシステムもProof-of-StakeベースのEth2にmigrateされることとなります。

### Phases

最後に今後の予定なんですが、ロードマップでは４つのフェーズに分けられています。

Phase 0, 1, 1.5, 2ですね。

フェーズ０ではBeacon chainのラウンチが行われます。これはちょうど今月のはじめに無事に施行され、すでにステーキングが始まっています。
そして次のフェーズ1ではdata shardingに主にフォーカスされます。
そしてフェーズ1.5でEth1のドッキングが行われて、ついにフェーズ０でデポジットしたETHを引き出すことが出来ます。
で、このフェーズ1.5まで少なくとも２年はかかると言われているので
フェーズ０からステーキングしているバリデーターはこの間数年に渡りずっとノードを動かし続ける必要があります。
さもなければスラッシュされます。

そして最後のフェーズ２ではstate executionにフォーカスされEVMの代替えとしてeWASMが登場が期待されています。
これによってスマートコントラクトを組み合わせてスケーラブルなDiFiなどのdappsを開発できるのではと期待されています。

## エンディング

またフェーズが進むにつれて具体的な仕様が出てくると思うので、追々他の動画で紹介していきます。 
結構ボリュームのある内容だったかなと思いますが、ここまでご視聴頂いてありがとうございます。
次回は実際にバリデーターとしてステーキングを始めるためのチュートリアル動画をアップする予定なのでぜひ通知を受け取りたい方はチャンネル登録よろしくお願い致します。

じゃあまたね
